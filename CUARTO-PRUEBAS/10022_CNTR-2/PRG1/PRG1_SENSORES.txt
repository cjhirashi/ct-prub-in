REM PRG1_SENSORES (CONTROL: CUARTO CONTROL 2)
REM LECTURA DE CAUDALES DE VAVS
REM AUTHOR CARLOS JIMENEZ HIRASHI @cjhirashi
REM VERSION 1.0.0

REM DECLARACION DE VARIABLES

	LOCALS DP,AREA,CV,CFM,CFM_R,MULT,OFFSET

REM CALCULO DE CAUDALES EN VAVS

	REM *PLENUM 1

		REM **VAV 03 - CHICA
			REM ***TAM = 04
				AREA = 0.0819 					: REM AREA DE CAJA VAV
				CV = 209						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI7						: REM CAIDA DE PRESION

			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV1 = MAX(0 ,CFM_R)				: REM CAUDAL ANTES DE CALIBRACION USUARIO

			REM ***CALIBRACION
				MULT = AV2						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV3					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = (CFM_R * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV4 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

	REM *PLENUM 3

		REM **VAV 01 - GRANDE
			REM ***TAM = 10
				AREA = 0.5319 					: REM AREA DE CAJA VAV
				CV = 1250						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI8						: REM CAIDA DE PRESION

			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV5 = MAX(0 ,CFM_R)				: REM CAUDAL ANTES DE CALIBRACION USUARIO

			REM ***CALIBRACION
				MULT = AV6						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV7					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = (CFM_R * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV8 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CAUDAL TOTAL - PLENUM 3
			AV9 = AV8					: REM CAUDAL TOTAL DE PLENUM

END