REM PRG1_SENSORES (CONTROL: CUARTO CONTROL 1)
REM LECTURA DE CAUDALES DE VAVS
REM AUTHOR CARLOS JIMENEZ HIRASHI @cjhirashi
REM VERSION 1.0.0

REM DECLARACION DE VARIABLES

	LOCALS DP,AREA,CV,CFM,CFM_R,MULT,OFFSET

REM CALCULO DE LECTURA DE CAJAS VAV

	REM *PLENUM 1

		REM **CALCULO DE CFM - P1_VAV M
			REM ***TAM = 08
				AREA = 0.3382 					: REM AREA DE CAJA VAV
				CV = 817						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI3						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV1 = CFM_R						: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV2						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV3					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = (CFM_R * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV4 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - P1_VAV G
			REM ***TAM = 14
				AREA = 1.05 					: REM AREA DE CAJA VAV
				CV = 2474						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI4						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV5 = CFM_R						: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV6						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV7					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV8 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - PLENUM 1
			IF INTERVAL(00:00:05) THEN AV9 = AV4 + AV8	+ 10022.AV134	: REM CAUDAL TOTAL DE PLENUM

	REM *PLENUM 2

		REM **CALCULO DE CFM - P2_VAV M
			REM ***TAM = 07
				AREA = 0.2578 					: REM AREA DE CAJA VAV
				CV = 612						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI5						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV10 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV11						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV12					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV13 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - P2_VAV G
			REM ***TAM = 12
				AREA = 0.7691 					: REM AREA DE CAJA VAV
				CV = 1792						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI6						: REM CAIDA DE PRESION
			
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV14 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV15						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV16					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV17 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - PLENUM 2
			AV18 = AV13 + AV17				: REM CAUDAL TOTAL DE PLENUM

	REM *PLENUM 4

		REM **CALCULO DE CFM - P4_VAV M
			REM ***TAM = 08
				AREA = 0.3382 					: REM AREA DE CAJA VAV
				CV = 817						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI7						: REM CAIDA DE PRESION
		
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV19 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO

			REM ***CALIBRACION
				MULT = AV20						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV21					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV22 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - P4_VAV G
			REM ***TAM = 14
				AREA = 1.05 					: REM AREA DE CAJA VAV
				CV = 2474						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI8						: REM CAIDA DE PRESION

			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV23 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO

			REM ***CALIBRACION
				MULT = AV24						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV25					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV26 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - P4_VAV C
			REM ***TAM = 4
				AREA = 0.0819 					: REM AREA DE CAJA VAV
				CV = 209						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI9						: REM CAIDA DE PRESION

			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV27 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO

			REM ***CALIBRACION
				MULT = AV28						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV29					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV30 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - PLENUM 4
			AV31 = AV22 + AV26 + AV30		: REM CAUDAL TOTAL DE PLENUM

	REM *PLENUM 5

		REM **CALCULO DE CFM - P5_VAV C
			REM ***TAM = 05
				AREA = 0.1296 					: REM AREA DE CAJA VAV
				CV = 315						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI10						: REM CAIDA DE PRESION

			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV32 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV33						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV34					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV35 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - P5_VAV G
			REM ***TAM = 16
				AREA = 1.3745 					: REM AREA DE CAJA VAV
				CV = 3235						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI11						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV36 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV37						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV38					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV39 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - PLENUM 5
			AV40 = AV35 + AV39				: REM CAUDAL TOTAL DE PLENUM

	REM *PLENUM 6

		REM **CALCULO DE CFM - P6_VAV G
			REM ***TAM = 14
				AREA = 1.05					: REM AREA DE CAJA VAV
				CV = 2474						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI12						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV41 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV42						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV43					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV44 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - P6_VAV M
			REM ***TAM = 8
				AREA = 0.3382					: REM AREA DE CAJA VAV
				CV = 817						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI13						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV45 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV46						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV47					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV48 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - PLENUM 6
			AV49 = AV44 + AV48				: REM CAUDAL TOTAL DE PLENUM

	REM *PLENUM R7

		REM **CALCULO DE CFM - PR7_VAV C
			REM ***TAM = 04
				AREA = 0.0819					: REM AREA DE CAJA VAV
				CV = 209						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI14						: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV50 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV51						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV52					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV53 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

		REM **CALCULO DE CFM - PR7_VAV G*
			REM ***TAM = 14
				AREA = 1.05					: REM AREA DE CAJA VAV
				CV = 2474						: REM COEFICIENTE DE VELOCIDAD DE CAJA
				DP = AI15					: REM CAIDA DE PRESION
	
			REM ***CONVERSION
				CFM_R = CV * ((DP)^0.5)			: REM FORMULA DE CONVERSION
				AV54 = CFM_R					: REM CAUDAL ANTES DE CALIBRACION USUARIO
	
			REM ***CALIBRACION
				MULT = AV55						: REM MULTIPLICADOR PARA CALIBRACION USUARIO
				OFFSET = AV56					: REM OFFSET PARA CALIBRACION USUARIO
				CFM = ((CFM_R) * MULT) + OFFSET	: REM CAUDAL CALIBRACION USUARIO
				AV57 = MAX(0 ,CFM)				: REM CAUDAL SIN VALORES NEGATIVOS

REM CALCULO DE CFM - PLENUM 6

	AV58 = AV53 + AV57				: REM CAUDAL TOTAL DE PLENUM
	AV102 = AV57					: REM CAUDAL CAJA GRANDE PLENUM 7 RETORNO
	AV103 = AV53					: REM CAUDAL CAJA CHICA PLENUM 7 RETORNO
	AV104 = AV102 + AV103

END