REM PRG1_ARRANQUES (CONTROL: PAH PAF PAC UMA02)
REM PROGRAMA PARA ARRANQUE DE PLANTAS DE AGUA
REM AUTHOR CARLOS JIMENEZ HIRASHI @cjhirashi
REM VERSION 1.0.0

REM DECLARACION DE VARIABLES

    LOCALS M_AF, M_AH, M_AC					: REM (LECTURA) SELECTORES DE ARRANQUE
    LOCALS SYS_AF, SYS_AH, SYS_AC			: REM (ESCRITURA) ACTIVACION DE SISTEMAS
    LOCALS AF_VF, AF
    LOCALS AH_UMA1, AH_UMA2, AH
    LOCALS AC_UMA1, AC_UMA2, AC_VF, AC

REM VARIABLES DE ENTRADA

    M_AF = MSV1			: REM MODO DE ACTIVACION DE P AGUA FRIA 	(1)AUTO, (2)FUERA, (3)MANUAL
    M_AH = MSV2			: REM MODO DE ACTIVACION DE P AGUA HELADA 	(1)AUTO, (2)FUERA, (3)MANUAL
    M_AC = MSV3			: REM MODO DE ACTIVACION DE P AGUA CALIENTE (1)AUTO, (2)FUERA, (3)MANUAL
    AF_VF = BV36		: REM ACTIVACION AGUA FRIA POR VIGAS FRIAS
    AH_UMA1 = BV31		: REM ACTIVACION AGUA HELADA POR UMA1
    AH_UMA2 = BV34		: REM ACTIVACION AGUA HELADA POR UMA2
    AC_UMA1 = BV32		: REM ACTIVACION AGUA CALIENTE POR UMA1
    AC_UMA2 = BV35		: REM ACTIVACION AGUA CALIENTE POR UMA2
    AC_VF = BV37		: REM ACTIVACION AGUA CALIENTE POR VIGA FRIA

REM ACTIVACION AUTOMATICA DE PLANTAS DE AGUA

    REM *ACTIVACION DE AGUA FRIA
	    AF = AF_VF

    REM *ACTIVACION DE AGUA HELADA
	    AH = MAX( AH_UMA1 , AH_UMA2 )

    REM *ACTIVACION DE AGUA CALIENTE
	    AC = MAX( AC_UMA1 , AC_UMA2 , AC_VF )

REM ACTIVACION DE PLANTAS POR MODO DE ARRANQUE

    REM *ACTIVACION AGUA FRIA

        REM **M_AF = (1)AUTO, (2)FUERA, (3)MANUAL
	        IF M_AF = 1 THEN
		        IF AF = 1 THEN SYS_AF = 1 ELSE SYS_AF = 0
	         ELSE
		        IF M_AF = 2 THEN
		    	    SYS_AF = 0
		         ELSE
		    	    IF M_AF = 3 THEN SYS_AF = 1 ELSE SYS_AF = 0
		        ENDIF
	        ENDIF

    REM *ACTIVACION AGUA HELADA

        REM **M_AF = (1)AUTO, (2)FUERA, (3)MANUAL
	        IF M_AH = 1 THEN
		        IF AH = 1 THEN SYS_AH = 1 ELSE SYS_AH = 0
	         ELSE
		        IF M_AH = 2 THEN
		        	SYS_AH = 0
		         ELSE
		        	IF M_AH = 3 THEN SYS_AH = 1 ELSE SYS_AH = 0
		        ENDIF
	        ENDIF

    REM *ACTIVACION AGUA CALIENTE

        REM **M_AF = (1)AUTO, (2)FUERA, (3)MANUAL
	        IF M_AC = 1 THEN
		        IF AC = 1 THEN SYS_AC = 1 ELSE SYS_AC = 0
	         ELSE
		        IF M_AC = 2 THEN
		        	SYS_AC = 0
		         ELSE
		        	IF M_AC = 3 THEN SYS_AC = 1 ELSE SYS_AC = 0
		        ENDIF
	        ENDIF

REM VARIABLES DE SALIDA

    BV5 = SYS_AF
    BV6 = SYS_AH
    BV7 = SYS_AC
    BV27 = AF
    BV28 = AH
    BV29 = AC

END